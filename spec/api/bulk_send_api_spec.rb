# frozen_string_literal: true

# SignWell Developer API
#
# API for creating, managing, and tracking electronic signature workflows.
#
# The version of the OpenAPI document: v1
# Contact: support@signwell.com
# Generated by: https://openapi-generator.tech
# Generator version: 7.12.0
#

require 'spec_helper'
require 'json'

# Integration tests for SignWell::Resources::BulkSendApi
# Auto-generated - tests run against Prism mock server (localhost:4010)
RSpec.describe SignWell::Resources::BulkSendApi, :prism do
  before(:all) do
    prism_url = URI(ENV.fetch('PRISM_URL', 'http://localhost:4010'))
    SignWell.configure do |config|
      config.scheme = prism_url.scheme
      config.host = "#{prism_url.host}:#{prism_url.port}"
      config.api_key['X-Api-Key'] = 'test-api-key'
    end
    @api = SignWell::Resources::BulkSendApi.new
    @test_id = '00000000-0000-0000-0000-000000000000'
  end

  describe '#create_bulk_send' do
    it 'returns BulkSendCreateResponse' do
      body = SignWell::CreateBulkSendRequest.new({ template_ids: ['00000000-0000-0000-0000-000000000000'],
                                                   bulk_send_csv: 'bmFtZSxlbWFpbApUZXN0LHRlc3RAZXhhbXBsZS5jb20K' })
      result = @api.create_bulk_send(body)
      expect(result).not_to be_nil
    end
  end

  describe '#get_bulk_send' do
    it 'returns BulkSendResponse' do
      result = @api.get_bulk_send(@test_id)
      expect(result).not_to be_nil
    end
  end

  describe '#get_bulk_send_csv_template' do
    it 'returns File' do
      skip 'requires non-path parameters - test with specific fixtures'
    end
  end

  describe '#get_bulk_send_documents' do
    it 'returns BulkSendDocumentsResponse' do
      result = @api.get_bulk_send_documents(@test_id)
      expect(result).not_to be_nil
    end
  end

  describe '#list_bulk_sends' do
    it 'returns BulkSendListResponse' do
      result = @api.list_bulk_sends
      expect(result).not_to be_nil
    end
  end

  describe '#validate_bulk_send_csv' do
    it 'returns BulkSendValidateCsvResponse' do
      body = SignWell::BulkSendCsvRequest.new({ template_ids: ['00000000-0000-0000-0000-000000000000'],
                                                bulk_send_csv: 'bmFtZSxlbWFpbApUZXN0LHRlc3RAZXhhbXBsZS5jb20K' })
      result = @api.validate_bulk_send_csv(body)
      expect(result).not_to be_nil
    end
  end
end
